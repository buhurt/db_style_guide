# Правила оформления БД 

При наличии функций `schema` данные разбиваются на логичные модули в схемы.

## Выбор имени сущности
- Имя должно быть существительным (полным, сокращенным либо аббревиатурой) в единственном числе.
- Имя должно быть уникальным в пределах базы данных.
- Имя должно быть мнемонически понятным проектантам без заглядывания в словарь (но словарь такой хорошо бы составить).
- Желательно, чтобы имена не начинались и не заканчивались на другие имена сущностей.

## Поля

- `id` - внутренний идентификатор, суррогатный ключ. Автоинкрементный. От пользователя скрывается. Никогда не модифицируется.
- `code` - пользовательский идентификатор, уникальный ключ. Например, табельный номер сотрудника. Как правило, неизменный; но при необходимости его можно менять, причем без каскадных обновлений БД.
- `name` - имя чего-либо (скорее идентификатор, или нечто каноническое)
- `label` - название (обычно человеческое удобное название)
- `description` - поле типа TEXT, для примечаний
- `num` - номер чего-либо (может быть числовой либо текстовый, например Письмо N "1234/56-789")

## Правила наименования полей

- Ссылка на первичный ключ другой таблицы заканчивается на `_id` (user_id, organization_id)
- Именование идет в единственном числе
- Поля типа `boolean` начинаются с префикса `is_` (is_delete, is_active)
- Поля дат начинаются с префикса `date_` (date_birthday, date_registration)
- Поля диапазонов начинаются пишутся с постфиксами `_start` и `_end` (date_start, date_end)
- Наименование пишется через `snake_case` (name_short, order_id)
- Все поля обязательно должны иметь пояснительный комментарий на русском языке  (`->comment('Пояснение')`)
- Очень желательно в каждой таблице вести поля по созданию, обновлению, удалению записей: 
    * `created_at`, `created_by` - кто создал и когда создал
    * `updated_at`, `updated_by` - кто обновил и когда обновил
    * `deleted_at`, `deleted_by` - кто удалил и когда удалил (допускается вариант использования одного поля `is_delete`)

## Правила для других объектов БД

- Первичные ключи называем так: PK_имя_схемы_имя_таблицы.
- Уникальные: UN_имя_схемы_имя_таблицы_имена_всех_полей (если хватит терпения и допустимой длины), или просто UN_имя_тблицы_номер_ключа_по_порядку.
- Внешние ключи: FK_имя_схемы_имя_таблицы_имя_поля
- Индексы - имя_схемы_имя_таблицы_имя_поля_idx

---

> Данный гайд составлен на основании лучших практик, скорректированный в сторону собственного опыта и удобства. 
Ни на какие обязательные применения не претендую, сделано для собственного удобства и быстрого ввода в курс дела моей команды.
Будет со временем дополняться и обновляться.
Если есть какие то вопросы и предложения, то готов выслушать в виде Pull Request.
